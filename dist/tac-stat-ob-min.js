var tacCompareSummary=(t,i,e)=>{var n=function(t){return new Promise(function(i){var e={async:!0,crossDomain:!0,url:t,method:"GET",headers:{}};$.ajax(e).done(function(t){i(t)})})};class a{constructor(t,i,e,n){this.body=i||$("body"),this.baseType=[60,65,75,85],this.unitName=this.body.find(".heading h1").text(),this.baseType.indexOf(t)<0?t=this.baseType[0]:this.refreshStat(t,n)}ajax(t,i,e){let o=this.icon;delete this.icon,console.log("Fetching url:",t),n(t).then(function(t){t=t.replace("<body",'<body><div id="body"').replace("</body>","</div></body>");var n=$(t).filter("#body"),d=i||60;n.data("icon",o);new a(d,n,null,e)})}statInfo(){return["hp","patk","pdef","matk","mdef","dex","agi","crit","luck","jewels"]}logStats(t){var i=this.unitName,e=this.body.find(".unit-panel > div.card-body > table > tbody > tr:nth-child(2) > td").text(),n=this.body.find(".unit-panel > div.card-body > table > tbody > tr:nth-child(1) > td span").data("title");console.log(i,"Stats",`(${e})`,`(${n})`);var a=[this.baseStat,this.j1Stat,this.j2Stat,this.j3Stat];this.body.find("#j4-tab").length&&a.push(this.j4Stat),t&&"function"==typeof t&&t({unitName:i,rank:e,elem:n,data:a,icon:this.body.data("icon")}),console.table(a,["info",...this.statInfo()])}loadPage(t,i){return new Promise((t,e)=>{setTimeout(()=>{i(),t()},1e3)})}refreshStat(t=60,i){if(console.log(`Reading ${this.unitName} stats (${t})...`),this.baseType.indexOf(t)<0)console.error("Invalid baseType");else{var e=this;e.loadPage("#stats",function(){e.getBaseStat(null,t)}).then(function(){return e.loadPage("#jobs",function(){})}).then(function(){return e.loadPage("#j1",function(){e.getJ1(1)})}).then(function(){return e.loadPage("#j2",function(){e.getJ2(1)})}).then(function(){return e.loadPage("#j3",function(){e.getJ3(1)})}).then(function(){return e.body.find("#j4-tab").length?e.loadPage("#j4",function(){e.getJ4(1)}):void 0}).then(function(){e.logStats(i)})}}getBaseStat(t,i){var e,n=this,a=t?n.body.find(t):n.body.find("#stats > div > div.card-body > div:nth-child(1) > div:nth-child(2) > table"),o=this.baseType.indexOf(i)+2,d=a.find("tr > td:nth-child("+o+")").map((t,i)=>parseFloat($(i).text()));return this.baseStat=(e={},n.statInfo().forEach((t,i)=>{e[t]=d[i]}),e),this.baseStat.info=`base (${i})`,this.baseStat}getJobStat(t,i){var e=(t?this.body.find(t):this.body.find("#stats > div > div.card-body > div:nth-child(1) > div:nth-child(1) > table")).find("tr > td:nth-child(2)").map((t,i)=>parseFloat($(i).text())),n=this.baseStat,a={};return this.statInfo().forEach((t,o)=>{var d=isNaN(e[o])?0:e[o];a[t]=i?d+n[t]:d}),a}getJ1(t){return this.j1Stat={info:this.body.find("a#j1-tab").text()+" (job1)"},Object.assign(this.j1Stat,this.getJobStat("#j1 > div > div.card-body > div:nth-child(1) > div:nth-child(1) > table:nth-child(1)",t)),this.j1Stat}getJ2(t){return this.j2Stat={info:this.body.find("a#j2-tab").text()+" (job2)"},Object.assign(this.j2Stat,this.getJobStat("#j2 > div > div.card-body > div:nth-child(1) > div:nth-child(1) > table:nth-child(1)",t)),this.j2Stat}getJ3(t){return this.j3Stat={info:this.body.find("a#j3-tab").text()+" (job3)"},Object.assign(this.j3Stat,this.getJobStat("#j3 > div > div.card-body > div:nth-child(1) > div:nth-child(1) > table:nth-child(1)",t)),this.j3Stat}getJ4(t){return this.j4Stat={info:this.body.find("a#j4-tab").text()+" (job4)"},Object.assign(this.j4Stat,this.getJobStat("#j4 > div > div.card-body > div:nth-child(1) > div:nth-child(1) > table:nth-child(1)",t)),this.j4Stat}}var o=t;if(i){var d={async:!0,crossDomain:!0,url:i,method:"GET",headers:{}};$.ajax(d).done(function(t){t=t.replace("<body",'<body><div id="body"').replace("</body>","</div></body>");var n=$(t).filter("#body"),d=new a,s=n.find("a.listing-link");console.log("Unit links found:",s.length),s.length||(n.find("#j1-tab").length?d.refreshStat(o,e):console.log("No units found.","Please check if you're on the correct page or visit http://www.alchemistcodedb.com/units")),s.each(function(t,n){var a=$(n).attr("href"),s=i.split("/").splice(0,1),h=i.split("/").splice(2,1);link=s+"//"+h+a,d.icon=$(n).find(".icon img:nth-child(1)").get(0).src,d.ajax(link,o,e)})})}else{var s=new a;if(!o)return void console.log("Please set base level.",s.baseType);if(!s.baseType.includes(o))return console.log(o),void console.log("Invalid base leve provided.","Select one of these:",s.baseType);var h=$("a.listing-link");console.log("Unit links found:",h.length),h.length||($("#j1-tab").length?s.refreshStat(o):console.log("No units found.","Please check if you're on the correct page or visit http://www.alchemistcodedb.com/units")),h.each(function(t,i){s.ajax(i.href,o)})}};